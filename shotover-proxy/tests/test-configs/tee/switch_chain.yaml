---
sources:
  - Redis:
      name: "redis-1"
      listen_addr: "127.0.0.1:6379"
      connection_limit: 3000000
      chain:
        - Tee:
            behavior: LogWarningOnMismatch
            buffer_size: 10000
            chain:
              Multi:
                chain_a: 
                  - DebugReturner:
                      Redis: "a"
                chain_b:
                  - DebugReturner:
                      Redis: "b"
        - DebugReturner:
            Redis: "a"
  - Redis:
      name: "redis-2"
      listen_addr: "127.0.0.1:6378"
      connection_limit: 
      chain:
        - Tee:
            behavior: LogWarningOnMismatch
            buffer_size: 10000
            switch_port: 1234
            chain:
              Single:
                  - DebugReturner:
                      Redis: "b"
        - DebugReturner:
            Redis: "a"
